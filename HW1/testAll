#!/bin/bash

#parameter $1 list of tests

DIR=$PWD

if [ -d "${DIR}/.logFiles" ]; then 
    echo ".logFiles dir exists, exiting"
    exit 1
else 
    mkdir .logFiles
    (( line_num = 1 ))
    (( test_num = 0 ))
    (( success_num = 0 ))
    
    while read line; do
        IFS='@'
        read -ra FIELDS <<< "$line"
        
        echo "${line_num}: ${FIELDS[0]}"
        echo "logFiles/${line_num}.compile.log ${FIELDS[1]}"
        
        # ./testCompilation "logFiles/${line_num}.compile.log $FIELDS[1]"
        printf "logFiles/${line_num}.inout.log" "${FIELDS[1]} ${FIELDS[2]} ${FIELDS[3]}"
        #./testInOut "logFiles/${line_num}.inout.log" "$FIELDS[1]" "$FIELDS[2]" "$FIELDS[3]"
        # ./testMemLeaks "logFiles/${line_num}.memory.log" "$FIELDS[1]" "$FIELDS[2]"
        printf   "logFiles/${line_num}.memory.log" "${FIELDS[1]} ${FIELDS[2]}"
        
        (( line_num = line_num + 1 ))
        IFS=' '
    done
        
fi
